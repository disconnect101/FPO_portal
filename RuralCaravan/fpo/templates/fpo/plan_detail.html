{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Plan Details</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="{% static 'css/mdb.min.css' %}" rel="stylesheet">
    <!--  custom styles  -->
    <link href="{% static 'css/style.min.css' %}" rel="stylesheet">
    <script type="text/javascript" src="{% static 'ckeditor/ckeditor-init.js' %}"></script>
    <script type="text/javascript" src="{% static 'ckeditor/ckeditor/ckeditor.js' %}"></script>
    <style type="text/css">

      html,
      body,
      header,
      .carousel {
        height: 60vh;
      }

      @media (max-width: 740px) {
        html,
        body,
        header,
        .carousel {
          height: 100vh;
        }
      }

      @media (min-width: 800px) and (max-width: 850px) {
        html,
        body,
        header,
        .carousel {
          height: 100vh;
        }
      }

      @media (min-width: 800px) and (max-width: 850px) {
              .navbar:not(.top-nav-collapse) {
                  background:#295e10!important;
              }
          }
img{
    border-radius:50%;
}
.counter {
    background-color:#b5eb86;
    padding: 20px 0;
    border-radius: 5px;
}

.count-title {
    font-size: 40px;
    font-weight: normal;
    margin-top: 10px;
    margin-bottom: 0;
    text-align: center;
}

.count-text {
    font-size: 13px;
    font-weight: normal;
    margin-top: 10px;
    margin-bottom: 0;
    text-align: center;

}

.fa-2x {
    margin: 0 auto;
    float: none;
    display: table;
    color: #389016;
}



    </style>
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="container">

      <!-- Brand -->
      <a class="navbar-brand" href="{% url 'home' %}">
        <strong>FPO PORTAL</strong>
      </a>

      <!-- Collapse -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Links -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">

        <!-- Left -->
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'home' %}">Home
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'meetings' %}" >Meetings</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="{% url 'plans' %}">Plans</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'govtschemes' %}" >Government Schemes</a>
          </li>
             <li class="nav-item">
            <a class="nav-link" href="{% url 'produce' %}" >Production</a>
          </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'FPOLedger'%}">Ledger</a>
            </li>
        </ul>

        <!-- Right -->
        <ul class="navbar-nav nav-flex-icons">
            <li class="nav-item">
            <a href="{% url 'add_user' %}" class="nav-link" data-toggle="tooltip" title="Add New User">
             <i class="fas fa-user-plus"></i>
            </a>
          </li>
             <li class="nav-item">
            <a href="{% url 'transaction'%}" class="nav-link" data-toggle="tooltip" title="Transactions">
             <i class="fas fa-rupee-sign"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'orders' %}" class="nav-link" data-toggle="tooltip" title="Orders">
             <i class="fas fa-shopping-cart"></i>
            </a>
          </li>
             <li class="nav-item">
            <a href="{% url 'products' %}" class="nav-link" data-toggle="tooltip" title="Products">
             <i class="fas fa-shopping-basket"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'fpo_statistics' %}" class="nav-link" data-toggle="tooltip" title="Statistics">
             <i class="fas fa-chart-bar"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'members' %}" class="nav-link border border-light rounded"
             >
              <i class="fas fa-user"></i>Members
            </a>
          </li>
		  <li class="nav-item">
            <a class="nav-link" href="{% url 'login' %}" >Logout</a>
          </li>


        </ul>

      </div>

    </div>
  </nav>
  <!-- Navbar -->



  <!--Main layout-->
  <main style="padding-top:8rem;">
    <div class="container" >


        <!--Section: Main features & Quick Start-->

       {% block content %}
      <section style="padding-bottom:5%">
          <!-- Grid row -->
      <div class="row">
          <div class="col-12">
             <!-- <div class="text-center">
                  <i class="fas fa-seedling fa-4x mb-2 green-text" style="opacity: 0.2"></i>
              </div>
              <p style="text-align: center; opacity: 0.2" class="mb-0"><strong>MORE INFORMATION</strong></p>-->
              <h1 style="text-align: center;" class="green-text mt-0 mb-3">Plan Details</h1>
              <hr style="margin: auto; width: 6rem; border: 2px solid #4aa327; border-radius: 20rem;">
              <br>
          </div>
      </div>
          <div class="row wow fadeIn">

        <!--Grid column-->
        <div class="col-md-6 mb-4  ">


                        {% if plans.image %}
                          <center><img src="{{plans.image.url}}"  /></center>
                          {% else %}
                         <center><img src="{% static 'img/download.png'%}" /></center>
                          {% endif %}




        </div>
        <!--Grid column-->

        <!--Grid column-->
        <div class="col-md-6 mb-4">

          <!--Card-->
          <div class="card">

            <!--Card content-->
            <div class="card-body">

                <h5 style="text-align: left;"><strong class="green-text">Plan Code:</strong> {{plans.code}}</h5>
                <h5 style="text-align: left;"><strong class="green-text">Crop Name:</strong> {{plans.name}}</h5>
               <h5 style="text-align: left;"><strong class="green-text">Crop Type:</strong> {{plans.type}}</h5>
                 <h5 style="text-align: left;"><strong class="green-text">Plan Status:</strong>
                     {% if plans.live %}
                           <strong class="blue-text"> ACTIVE</strong>
                    {% else %}
                           <strong class="orange-text"> INACTIVE</strong>
                    {% endif %}





                </h5>




            </div>

          </div>
          <!--/.Card-->

        </div>
        <!--Grid column-->

      </div>
      <!--Grid row-->

      <!--<div class="row" style="margin: 8rem auto;">
        <div class="col-3" style="border-right: 2px solid rgba(128,128,128, 0.5);">
          <h1 class="text-center mb-0" style="color: lighgray; opacity: 0.5;">{{plans.subscribers}}</h1>
          <p class="text-center mb-0"><strong style="color: #4caf50; font-size: 1.2rem;">SUBSCRIBERS</strong></p>
        </div>
        <div class="col-3" style="border-right: 2px solid rgba(128,128,128, 0.5);">
          <h1 class="text-center mb-0" style="color: lighgray; opacity: 0.5;">{{plans.max_cap}} <span style="font-size: 1rem;">QT.</span></h1>
          <p class="text-center mb-0"><strong style="color: #4caf50; font-size: 1.2rem;">REQUIREMENT</strong></p>
        </div>
        <div class="col-3" style="border-right: 2px solid rgba(128,128,128, 0.5);">
          <h1 class="text-center mb-0" style="color: lighgray; opacity: 0.5;">{{plans.current_amount}} <span style="font-size: 1rem;">QT.</span></h1>
          <p class="text-center mb-0"><strong style="color: #4caf50; font-size: 1.2rem;">COLLECTED</strong></p>
        </div>
        <div class="col-3">
          <h1 class="text-center mb-0" style="color: lighgray; opacity: 0.5;">{{plans.weigth_per_land}} <span style="font-size: 1rem;">QT.</span></h1>
          <p class="text-center mb-0"><strong style="color: #4caf50; font-size: 1.2rem;">WEIGHT PER ACRE</strong></p>
        </div>
      </div>-->
          <div class="row text-center">
	        <div class="col">
	        <div class="counter">
                <i class="fas fa-users fa-2x"></i>

              <h2 class="timer count-title count-number" data-to="{{plans.subscribers}}" data-speed="1500"></h2>
               <p class="count-text ">SUBSCRIBERS</p>
            </div>
	        </div>
              <div class="col">
               <div class="counter">
              <i class="fas fa-weight-hanging fa-2x"></i>
              <h2 class="timer count-title count-number" data-to="{{plans.max_cap}}" data-speed="1500"></h2>
              <p class="count-text ">REQUIREMENT(Kgs)</p>
            </div>
              </div>
              <div class="col">
                  <div class="counter">
                  <i class="fas fa-weight-hanging fa-2x"></i>
                  <h2 class="timer count-title count-number" data-to="{{plans.current_amount}}" data-speed="1500"></h2>
                  <p class="count-text ">COLLECTED(Kgs)</p>
                </div></div>
              <div class="col">
              <div class="counter">
              <i class="fas fa-weight-hanging fa-2x"></i>
              <h2 class="timer count-title count-number" data-to="{{plans.weigth_per_land}}" data-speed="1500"></h2>
              <p class="count-text ">WEIGHT PER ACRE(Kgs)</p>
             </div>
              </div>
         </div>


      <div class="row">
        <div class="col-md-6">
          <h1 style="text-align: center;" class="green-text mb-4">Estimated Crop Contribution</h1>
          <hr class="mb-4" style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
          <canvas id="pieChart1" width="100" height="100"></canvas>
        </div>
        <div class="col-md-6">
          <h1 style="text-align: center;" class="green-text mb-2">Products</h1>
          <hr style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem; margin-bottom: 2rem;">
          <div class="text-center">
            <i class="fas fa-sitemap fa-3x mb-4" style="opacity: 0.15; color: #4caf50"></i>
          </div>
          <p style="text-align: center;">These are the products that are required for the cultivation of {{plans.name}}</p>
          <ul class="list-group">
            {% for product in products %}
            <li class="list-group-item list-group-item-success">{{product.name}}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      <div class="row" style="margin-top:8rem;">
        <div class="col-md-12">
          <p style="text-align: left; opacity: 0.2" class="mb-0"><strong>TIPS</strong></p>
            <h1 style="text-align: left;" class="green-text mt-0 mb-3">Guidelines</h1>
            <hr style="margin: 0; width: 4rem; border: 2px solid #4caf50; border-radius: 20rem;">
            <br>
            <p style="text-align: right; text-transform: uppercase; font-size: 1.2rem;" class="green-text"><strong>{{data.date}}</strong></p>
            <h5 style="text-align: left;"><strong class="green-text">Details:</strong></h5>
            {{plans.guidance|safe}}
        </div>
      </div>
          <div class="row">
          <div class="col-md-12 col-lg-12">

            <h5 style="text-align: left;"><strong class="green-text">Investment Requirements:</strong>
                {{plans.investment_requirements}}</h5>

            </div>

      </div>

          <h5 style="text-align: left;"><strong class="green-text">Facilities:</strong> {{plans.facilities}}</h5>
      <div class="row" style="margin-top: 8rem;">
        <div class="col-12">
          <h1 style="text-align: center;" class="green-text mb-4">Subscribers By Village</h1>
          <hr class="mb-4" style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
          <canvas id="myChart" width="100" height="60"></canvas>
        </div>
      </div>
      </section>
      {% endblock content %}
    </div>
  </main>
  <!--Main layout-->

  <!--Footer-->
  <footer class="page-footer text-center font-small mt-4 wow fadeIn" >



    <!--Copyright-->
    <div class="footer-copyright py-3">
      © 2020 Copyright:
  Rural Caravan
    </div>
    <!--/.Copyright-->

  </footer>
  <!--/.Footer-->

    <!-- SCRIPTS -->
    <!-- JQuery -->
    <script type="text/javascript" src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="{% static 'js/popper.min.js' %}"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="{% static 'js/mdb.min.js' %}"></script>
      <!-- Initializations -->
  <script type="text/javascript">
    // Animations initialization
    //new WOW().init();
  </script>

<script>

    // Line
    var villages = {{ villages|safe }};
    var villageTotal = {{ village_total|safe }};

    var ctx = document.getElementById("myChart").getContext('2d');
    var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: villages, //village names
        datasets: [{
          label: 'Total Number of Subscribers',
          data: villageTotal,
          backgroundColor: [
            'rgba(255, 99, 132,0.3)',
            'rgba(54, 162, 235,0.3)',
            'rgba(255, 206, 86,0.3)',
            'rgba(75, 192, 192,0.3)',
            'rgba(153, 102, 255,0.3)',
            'rgba(255, 159, 64,0.3)'
          ],
          borderColor: [
            'rgba(255,99,132,1)',
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          yAxes: [{
            ticks: {
              beginAtZero: true
            }
          }]
        }
      }
    });
    
    //pie2
    var produceAmountPercentages = {{ produce_amount_percentages|safe }};
    var produceVillages = {{ produce_villages|safe }};
    
    var ctxP2 = document.getElementById("pieChart1").getContext('2d');
    var myPieChart = new Chart(ctxP2, {
      type: 'pie',
      data: {
        labels: produceVillages,
        datasets: [{
          data: produceAmountPercentages,
          backgroundColor: [
                'rgba(255, 206, 86, 0.2)',
                'rgba(78, 205, 196, 0.2)',
                'rgba(255, 107, 107, 0.2)',
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)'
            ],
          borderColor: [
                'rgba(255, 206, 86, 1)',
                'rgba(78, 205, 196, 1)',
                'rgba(255, 107, 107, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)'
            ]
        }]
      },
      options: {
        responsive: true,
      }
    });

  </script>
<script>
    (function ($) {
	$.fn.countTo = function (options) {
		options = options || {};

		return $(this).each(function () {
			// set options for current element
			var settings = $.extend({}, $.fn.countTo.defaults, {
				from:            $(this).data('from'),
				to:              $(this).data('to'),
				speed:           $(this).data('speed'),
				refreshInterval: $(this).data('refresh-interval'),
				decimals:        $(this).data('decimals')
			}, options);

			// how many times to update the value, and how much to increment the value on each update
			var loops = Math.ceil(settings.speed / settings.refreshInterval),
				increment = (settings.to - settings.from) / loops;

			// references & variables that will change with each update
			var self = this,
				$self = $(this),
				loopCount = 0,
				value = settings.from,
				data = $self.data('countTo') || {};

			$self.data('countTo', data);

			// if an existing interval can be found, clear it first
			if (data.interval) {
				clearInterval(data.interval);
			}
			data.interval = setInterval(updateTimer, settings.refreshInterval);

			// initialize the element with the starting value
			render(value);

			function updateTimer() {
				value += increment;
				loopCount++;

				render(value);

				if (typeof(settings.onUpdate) == 'function') {
					settings.onUpdate.call(self, value);
				}

				if (loopCount >= loops) {
					// remove the interval
					$self.removeData('countTo');
					clearInterval(data.interval);
					value = settings.to;

					if (typeof(settings.onComplete) == 'function') {
						settings.onComplete.call(self, value);
					}
				}
			}

			function render(value) {
				var formattedValue = settings.formatter.call(self, value, settings);
				$self.html(formattedValue);
			}
		});
	};

	$.fn.countTo.defaults = {
		from: 0,               // the number the element should start at
		to: 0,                 // the number the element should end at
		speed: 1000,           // how long it should take to count between the target numbers
		refreshInterval: 100,  // how often the element should be updated
		decimals: 0,           // the number of decimal places to show
		formatter: formatter,  // handler for formatting the value before rendering
		onUpdate: null,        // callback method for every time the element is updated
		onComplete: null       // callback method for when the element finishes updating
	};

	function formatter(value, settings) {
		return value.toFixed(settings.decimals);
	}
}(jQuery));

jQuery(function ($) {
  // custom formatting example
  $('.count-number').data('countToOptions', {
	formatter: function (value, options) {
	  return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
	}
  });

  // start all the timers
  $('.timer').each(count);

  function count(options) {
	var $this = $(this);
	options = $.extend({}, options || {}, $this.data('countToOptions') || {});
	$this.countTo(options);
  }
});

</script>

</body>

</html>