{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Meetings</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="{% static 'css/mdb.min.css' %}" rel="stylesheet">
    <!--  custom styles  -->
    <link href="{% static 'css/style.min.css' %}" rel="stylesheet">
    <!-- Charts Js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.css" crossorigin="anonymous"></link>
    <style type="text/css">

      html,
      body,
      header,
      .carousel {
        height: 60vh;
      }

      @media (max-width: 740px) {
        html,
        body,
        header,
        .carousel {
          height: 100vh;
        }
      }

      @media (min-width: 800px) and (max-width: 850px) {
        html,
        body,
        header,
        .carousel {
          height: 100vh;
        }
      }

      @media (min-width: 800px) and (max-width: 850px) {
              .navbar:not(.top-nav-collapse) {
                  background:#295e10!important;
              }
          }

      input.rsvp {
        background-color: #4caf50;
        width: 14px;
        height: 14px;
      }

      #pushButton {
        background-color: white;
        border: 1px solid #d62828;
        color: #d62828;
        border-radius: 0.2rem;
        font-size: 1.4rem;
        padding: 0.2rem 1rem;
        transition: all 0.5s;
      }

      #pushButton:hover {
        background-color: #d62828;
        border: 1px solid white;
        color: white;
      }

      #pushButton:focus, #pushButton:active, #pushButton:selected {
        border: 1px solid #d62828;
      }

      input.selectAll {
        width: 16px;
        height: 16px;
      }

      .card {
        cursor: pointer;
      }

      option:hover, option:checked {
          background-color: #4caf50 !important;
          color: white !important;
      }

      option:active {
          border: 1px solid #4caf50;
      }

    </style>
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
    <div class="container">

      <!-- Brand -->
      <a class="navbar-brand" href="{% url 'home' %}" target="_blank">
        <strong>FPO PORTAL</strong>
      </a>

      <!-- Collapse -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Links -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">

        <!-- Left -->
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'home' %}">Home
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="{% url 'meetings' %}" >Meetings</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="{% url 'plans' %}" >Plans</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="{% url 'govtschemes' %}" >Government Schemes</a>
          </li>
        </ul>

        <!-- Right -->
        <ul class="navbar-nav nav-flex-icons">
          <li class="nav-item">
            <a href="orders.html" class="nav-link" >
             <i class="fas fa-shopping-cart"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="statistics.html" class="nav-link" >
             <i class="fas fa-chart-bar"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'members' %}" class="nav-link border border-light rounded"
              target="_blank">
              <i class="fas fa-user"></i>Members
            </a>
          </li>
		   <li class="nav-item">
            <a class="nav-link" href="{% url 'login' %}" >Logout</a>
          </li>
        </ul>


      </div>

    </div>
  </nav>
  <!-- Navbar -->



  <!--Main layout-->
<main style="padding-top:8rem;">
    <div class="container" >
        <div class="row">
            <div class="col-12">
                <div class="text-center">
                    <i class="fas fa-calculator fa-4x mb-2 green-text" style="opacity: 0.2"></i>
                </div>
                <p style="text-align: center; opacity: 0.2" class="mb-0"><strong>CLOSER LOOK AT THE NUMBERS</strong></p>
                <h1 style="text-align: center;" class="green-text mt-0 mb-3">The Organisation at a Glance</h1>
                <hr style="margin: auto; width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-3">
                <div class="card" style="background-color: #4caf50;">
                <div class="card-body">
                    <h2 class="text-center mb-0" style="color: white;">800</h2>
                    <p class="text-center mb-0"><strong style="color: white;">FARMERS</strong></p>
                </div>
                </div>
            </div>
            <div class="col-3">
                <div class="card" style="background-color: #4caf50;">
                <div class="card-body">
                    <h2 class="text-center mb-0" style="color: white;">21</h2>
                    <p class="text-center mb-0"><strong style="color: white;">VILLAGES</strong></p>
                </div>
                </div>
            </div>
            <div class="col-3">
                <div class="card" style="background-color: #4caf50;">
                <div class="card-body">
                    <h2 class="text-center mb-0" style="color: white;">3000</h2>
                    <p class="text-center mb-0"><strong style="color: white;">QT. PRODUCTION</strong></p>
                </div>
                </div>
            </div>
            <div class="col-3">
                <div class="card" style="background-color: #4caf50;">
                <div class="card-body">
                    <h2 class="text-center mb-0" style="color: white;">â‚¹ 10L</h2>
                    <p class="text-center mb-0"><strong style="color: white;">PROFITS</strong></p>
                </div>
                </div>
            </div>
        </div>   
        <div class="row" style="margin-top: 4rem;">
            <div class="col-6">
                <h1 style="text-align: center;" class="green-text mb-4">Communcation Channels</h1>
                <hr class="mb-4" style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
                <canvas id="communicationChannel" width="100" height="100"></canvas>
            </div>
            <div class="col-6">
                <h1 style="text-align: center;" class="green-text mb-4">Farmers with Leaders</h1>
                <hr class="mb-4" style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
                <canvas id="farmersWithLeaders" width="100" height="100"></canvas>
            </div>
        </div>
         <div class="row" style="margin-top: 4rem;">
            <div class="col-1"></div>
            <div class="col-10 mt-4">
                <h1 style="text-align: center;" class="green-text">Engagement Of Farmers</h1>
                <hr class="mb-2" style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
                <canvas id="farmerEngagement" width="100" height="60"></canvas>
            </div>
        </div>
        <div class="row" style="margin-top: 4rem;">
            <div class="col-6 mt-4">
                <h1 style="text-align: center;" class="green-text">Villages</h1>
                <hr class="mb-4" style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
                <canvas id="villages" width="100" height="100"></canvas>
            </div>
            <div class="col-6 mt-4">
                <h1 style="text-align: center;" class="green-text">Crops</h1>
                <hr class="mb-4" style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
                <canvas id="crops" width="100" height="100"></canvas>
            </div>
        </div>
        <div class="row" style="margin-top: 4rem;">
            <div class="col-6 mt-4">
                <h1 style="text-align: center;" class="green-text">Production By Crop</h1>
                <hr class="mb-4" style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
                <div class="form-group">
                    <label for="cropSelector" style="color: #4caf50;"><strong>Select Crop</strong></label>
                    <select class="form-control" style="border: 1px solid #4caf50; color: #4caf50;" id="cropSelector">
                        <option style="color: #4caf50">Rice</option>
                        <option style="color: #4caf50">Wheat</option>
                        <option style="color: #4caf50">Bajra</option>
                    </select>
                </div>
                <canvas id="productionByCrop" width="100" height="100"></canvas>
            </div>
        </div>
        <div class="row" style="margin-top: 4rem;">
            <div class="col-1"></div>
            <div class="col-10 mt-4">
                <h1 style="text-align: center;" class="green-text">Profits By Year</h1>
                <hr class="mb-2" style="width: 6rem; border: 2px solid #4caf50; border-radius: 20rem;">
                <div class="form-group">
                    <label for="yearSelector" style="color: #4caf50;"><strong>Select Year</strong></label>
                    <select class="form-control" style="border: 1px solid #4caf50; color: #4caf50;" id="yearSelector">
                        <option style="color: #4caf50">2017</option>
                        <option style="color: #4caf50">2018</option>
                        <option style="color: #4caf50">2019</option>
                    </select>
                </div>
                <canvas id="profitsByYear" width="100" height="60"></canvas>
            </div>
        </div>
    </div>
    
</main>
  <!--Main layout-->

  <!--Footer-->
  <footer class="page-footer text-center font-small mt-4 wow fadeIn" >



    <!--Copyright-->
    <div class="footer-copyright py-3">
      Â© 2020 Copyright:
  Rural Caravan
    </div>
    <!--/.Copyright-->

  </footer>
  <!--/.Footer-->

    <!-- SCRIPTS -->
    <!-- JQuery -->
    <script type="text/javascript" src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="{% static 'js/popper.min.js' %}"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="{% static 'js/mdb.min.js' %}"></script>
      <!-- Initializations -->
  <script type="text/javascript">
    // Animations initialization
    new WOW().init();

    //Javascript for Graphs and Rendering

    // Communication Channels for the farmers
    var ctxCommunicationChannel = document.getElementById('communicationChannel').getContext('2d');
    var communicationChannel = new Chart(ctxCommunicationChannel, {
        type: 'pie',
        data: {
            datasets: [{
                data: [200, 100, 500],
                backgroundColor: [
                'rgba(255, 206, 86, 0.4)',
                'rgba(78, 205, 196, 0.4)',
                'rgba(255, 107, 107, 0.4)',
                ],
                borderColor: [
                'rgba(255, 206, 86, 1)',
                'rgba(78, 205, 196, 1)',
                'rgba(255, 107, 107, 1)',
                ] 
            }],
            labels: ['Smartphones', 'Feature Phones', 'No Phones']
        },
        options: {}
    });

    // Farmers with Leaders
    var ctxFarmersWithLeaders = document.getElementById('farmersWithLeaders').getContext('2d');
    var farmersWithLeaders = new Chart(ctxFarmersWithLeaders, {
        type: 'pie',
        data: {
            datasets: [{
                data: [500, 300],
                backgroundColor: [
                'rgba(255, 206, 86, 0.4)',
                'rgba(78, 205, 196, 0.4)',
                'rgba(255, 107, 107, 0.4)',
                ],
                borderColor: [
                'rgba(255, 206, 86, 1)',
                'rgba(78, 205, 196, 1)',
                'rgba(255, 107, 107, 1)',
                ] 
            }],
            labels: ['Managed By Leaders', 'No Leaders Assigned']
        },
        options: {}
    });

    // Villages for farmers
    var ctxVillages = document.getElementById('villages').getContext('2d');
    var villages = new Chart(ctxVillages, {
        type: 'pie',
        data: {
            datasets: [{
                data: [100, 50, 250, 100, 50, 150, 100],
                backgroundColor: [
                'rgba(255, 206, 86, 0.4)',
                'rgba(78, 205, 196, 0.4)',
                'rgba(255, 107, 107, 0.4)',
                'rgba(255, 99, 132, 0.4)',
                'rgba(54, 162, 235, 0.4)',
                'rgba(255, 206, 86, 0.4)',
                'rgba(75, 192, 192, 0.4)'
                ],
                borderColor: [
                'rgba(255, 206, 86, 1)',
                'rgba(78, 205, 196, 1)',
                'rgba(255, 107, 107, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                ] 
            }],
            labels: ['Amravati', 'Nashik', 'Kolhapur', 'Ratnagiri', 'Dhule', 'Bilaspur', 'Mungeli']
        },
        options: {}
    });

    // Crops by farmers
    var ctxCrops = document.getElementById('crops').getContext('2d');
    var crops = new Chart(ctxCrops, {
        type: 'pie',
        data: {
            datasets: [{
                data: [1570, 1200, 1500, 580, 1900, 1650, 100],
                backgroundColor: [
                'rgba(255, 206, 86, 0.4)',
                'rgba(78, 205, 196, 0.4)',
                'rgba(255, 107, 107, 0.4)',
                'rgba(255, 99, 132, 0.4)',
                'rgba(54, 162, 235, 0.4)',
                'rgba(255, 206, 86, 0.4)',
                'rgba(75, 192, 192, 0.4)'
                ],
                borderColor: [
                'rgba(255, 206, 86, 1)',
                'rgba(78, 205, 196, 1)',
                'rgba(255, 107, 107, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                ] 
            }],
            labels: ['Rice', 'Wheat', 'Corn', 'Sugarcane', 'Bajra', 'Paddy', 'Maize']
        },
        options: {}
    });


    // Production By Crop
    var cropByYears = [
    {
        name: 'Rice',
        data: [100, 200, 300, 400, 500],
        years: ['2015', '2016', '2017', '2018', '2019']
    },
    {
        name: 'Wheat',
        data: [200, 300, 400, 500, 600],
        years: ['2015', '2016', '2017', '2018', '2019']
    },
    {
        name: 'Bajra',
        data: [400, 300, 500, 600, 900],
        years: ['2015', '2016', '2017', '2018', '2019']
    }
    ];

    var crops = ['Rice', 'Wheat', 'Bajra'];

    var cropData = cropByYears[0].data;
    var cropYears = cropByYears[0].years;

    var ctxProductionByCrop = document.getElementById('productionByCrop').getContext('2d');
    var productionByCrop = new Chart(ctxProductionByCrop, {
        type: 'bar',
        data: {
        labels: cropYears,
        datasets: [{
            label: 'Crop Production By Year',
            data: cropData,
            backgroundColor: [
                'rgba(255, 206, 86, 0.2)',
                'rgba(78, 205, 196, 0.2)',
                'rgba(255, 107, 107, 0.2)',
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)'
            ],
            borderColor: [
                'rgba(255, 206, 86, 1)',
                'rgba(78, 205, 196, 1)',
                'rgba(255, 107, 107, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)'
            ],
            borderWidth: 1
        }]
    },
        options: {
             scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
        }
    });

    // For selecting the crop from the dropdown menu
    document.querySelector('#cropSelector').addEventListener('change', function() {
        var cropName = document.querySelector('#cropSelector').value;
        var cropIndex = crops.indexOf(cropName);
        cropData = cropByYears[cropIndex].data;
        cropYears = cropByYears[cropIndex].years;
        productionByCrop.data.datasets[0].data = cropData;
        productionByCrop.data.labels = cropYears; 
        productionByCrop.update();
    });


    // For visualization of Profits
    var profitByYearsData = [
    {
        year: '2017',
        data: [100, 200, 300, 400, 500, 500, 100, 200, 300, 400, 900, 200],
    },
    {
        year: '2018',
        data: [200, 300, 400, 500, 600, 400, 500, 500, 100, 200, 300, 400],
    },
    {
        year: '2019',
        data: [400, 300, 500, 600, 900, 100, 200, 300, 400, 500, 200, 100],
    }
    ];

    var years = ['2017', '2018', '2019'];

    var profitsData = profitByYearsData[0].data;



    var ctxProfitsByYear = document.getElementById('profitsByYear').getContext('2d');
	var profitsByYear = new Chart(ctxProfitsByYear, {
        type: 'line',
        data: {
            labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
            datasets: [{
                label:['Profits'],
                backgroundColor: ['rgba(255, 206, 86, 0.2)'],
                borderColor: ['rgba(255, 206, 86, 1)'],
                data: profitsData,
                fill: true,
            }]
        },
        options: {
            responsive: true,
            title: {
                display: true,
                text: 'Profits in Lakhs'
            },
            tooltips: {
                mode: 'index',
                intersect: false,
            },
            hover: {
                mode: 'nearest',
                intersect: true
            },
            scales: {
                xAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Month'
                    }
                }],
                yAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Value'
                    }
                }]
            }
        }
    });

    // For selecting the year from the dropdown menu
    document.querySelector('#yearSelector').addEventListener('change', function() {
        var yearNumber = document.querySelector('#yearSelector').value;
        var yearIndex = years.indexOf(yearNumber);
        profitsData = profitByYearsData[yearIndex].data;
        profitsByYear.data.datasets[0].data = profitsData; 
        profitsByYear.update();
    });



    // For the visualization of engagement of farmers
    var ctxFarmerEngagement = document.getElementById('farmerEngagement').getContext('2d');
	var farmerEngagement = new Chart(ctxFarmerEngagement, {
        type: 'line',
        data: {
            labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
            datasets: [{
                label:['Farmers with Smartphones'],
                backgroundColor: ['rgba(255, 206, 86, 0.2)'],
                borderColor: ['rgba(255, 206, 86, 1)'],
                data: [45, 67, 86, 12, 45, 32, 73, 89,  43, 45, 56, 34],
                fill: false
            },
            {
                label:['Farmers with Feature Phones'],
                backgroundColor: ['rgba(78, 205, 196, 0.2)',],
                borderColor: ['rgba(78, 205, 196, 1)',],
                data: [34, 45, 67, 86, 73, 89, 12, 45, 32, 43, 45, 56],
                fill: false
            },
            {
                label:['Farmers with no Phones'],
                backgroundColor: ['rgba(54, 162, 235, 0.2)',],
                borderColor: ['rgba(54, 162, 235, 1)',],
                data: [12, 45, 67, 86, 73, 86, 73, 89, 89, 12, 45, 67],
                fill: false
            }]
        },
        options: {
            responsive: true,
            title: {
                display: true,
                text: 'Percentage Engagement of Farmers'
            },
            tooltips: {
                mode: 'index',
                intersect: false,
            },
            hover: {
                mode: 'nearest',
                intersect: true
            },
            scales: {
                xAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Month'
                    }
                }],
                yAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Value'
                    }
                }]
            }
        }
    });


  </script>
</body>

</html>
